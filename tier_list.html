<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tier List Matrix</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* --- STYLE KHUSUS MATRIKS TIER LIST --- */
        
        .tier-section {
            margin-bottom: 50px;
            background: #1a1a1a;
            border-radius: 12px;
            border: 1px solid #444;
            overflow: hidden;
        }

        .tier-header {
            padding: 15px;
            font-size: 2rem;
            font-weight: 900;
            text-align: center;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        /* Rank Colors */
        .header-SSRr { background: linear-gradient(90deg, #d32f2f, #ff5252, #d32f2f); }
        .header-SSR { background: linear-gradient(90deg, #f57c00, #ffb74d, #f57c00); }
        .header-SR { background: linear-gradient(90deg, #7b1fa2, #ba68c8, #7b1fa2); }
        .header-R { background: linear-gradient(90deg, #1976d2, #64b5f6, #1976d2); }

        /* Grid Matrix: 1 (Role) + 5 (Elements) = 6 Columns */
        .matrix-grid {
            display: grid;
            grid-template-columns: 100px repeat(5, 1fr);
            background: #222;
        }

        .cell {
            border: 0.5px solid #333;
            min-height: 80px;
            padding: 8px;
            display: flex;
            /* flex-direction: column; */
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }

        /* Header Row Styles */
        .header-cell {
            background: #282828;
            font-weight: bold;
            text-align: center;
            padding: 10px 5px;
            color: #fff;
            text-transform: uppercase;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Role Column Labels */
        .role-label {
            background: #2d2d2d;
            font-weight: bold;
            color: #ccc;
            writing-mode: horizontal-tb;
            font-size: 0.75rem;
        }

        .role-label img {
            width: 90%;
        }

        /* Element Colors for Headers */
        .bg-Fire { color: #ff5722; border-bottom: 3px solid #ff5722; }
        .bg-Water { color: #03a9f4; border-bottom: 3px solid #03a9f4; }
        .bg-Wind { color: #4caf50; border-bottom: 3px solid #4caf50; }
        .bg-Light { color: #ffeb3b; border-bottom: 3px solid #ffeb3b; }
        .bg-Dark { color: #9c27b0; border-bottom: 3px solid #9c27b0; }

        /* --- CHAR CARD MINI LAYOUT --- */
        .tc-card {
            width: 100%;
            max-width: 120px;
            background: #111;
            border-radius: 4px;
            border: 1px solid #444;
            overflow: hidden;
            transition: 0.2s;
            position: relative;
        }

        /* | img | Name | */
        .tc-main {
            display: flex;
            align-items: center;
            padding: 4px;
            gap: 6px;
            min-height: 45px;
        }

        .tc-img {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            object-fit: cover;
            border: 1px solid #555;
            flex-shrink: 0;
        }

        .tc-name {
            font-size: 0.65rem;
            font-weight: bold;
            line-height: 1.1;
            color: #eee;
            word-wrap: break-word; /* Wrap text optimal */
            overflow: hidden;
        }

        /* | Status | Star | */
        .tc-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2px 6px;
            background: #000;
            border-top: 1px solid #333;
        }

        .tc-status { font-size: 0.7rem; }
        .tc-stars { font-size: 0.6rem; color: gold; letter-spacing: -1px; }

        /* States */
        .not-owned { opacity: 0.4; filter: grayscale(1); }
        .not-owned:hover { opacity: 1; filter: grayscale(0); border-color: #777; }

        /* Responsive */
        @media (max-width: 900px) {
            .matrix-grid { overflow-x: auto; display: block; white-space: nowrap; }
            .cell { display: inline-flex; width: 140px; vertical-align: top; white-space: normal; }
            .role-label { position: sticky; left: 0; z-index: 10; width: 80px; }
        }
    </style>
</head>
<body>

<div id="sidebar">
    <input type="checkbox" id="checkmn" checked />
    <label for="checkmn" id="toggle-btn">‚ò∞</label>
    <a href="index.html">üìä <span>Status Karakter</span></a>
    <a href="tambah.html">‚ûï <span>Buat Karakter Baru</span></a>
    <a href="tier_list.html" class="active">üèÜ <span>Tier List</span></a>
    <a href="update_list.html">üìù <span>Update Karakter</span></a>
    <a href="backup_recovery.html">üíæ <span>Backup/Recovery</span></a>
</div>

<div id="main-content">
    <h1>üèÜ Global Tier List Matrix</h1>
    <div id="matrix-container"></div>
</div>

<script>
    const STORAGE_KEY = 'CHARACTER_DATA_V1';

    // Data Master (Disesuaikan dengan list Anda)
    const masterRoster = [
        { name: "Kagura (Summer)", rank: "SSRr", element: "Fire", role: "Fighter" },
        { name: "Lina", rank: "SSRr", element: "Fire", role: "Fighter" },
        { name: "Miyuki", rank: "SSRr", element: "Fire", role: "Fighter" },
        { name: "Coco", rank: "SSRr", element: "Fire", role: "Defender" },
        { name: "Nova", rank: "SSRr", element: "Fire", role: "Defender" },
        { name: "Kazura", rank: "SSRr", element: "Fire", role: "Defender" },
        { name: "Tomoe", rank: "SSRr", element: "Fire", role: "Healer" },
        { name: "Miko", rank: "SSRr", element: "Fire", role: "Support" },
        { name: "Shion", rank: "SSRr", element: "Water", role: "Fighter" },
        { name: "Reina", rank: "SSRr", element: "Water", role: "Fighter" },
        { name: "Parin", rank: "SSRr", element: "Water", role: "Assassin" },
        { name: "Hiyori (Summer)", rank: "SSRr", element: "Water", role: "Healer" },
        { name: "Hina", rank: "SSRr", element: "Water", role: "Healer" },
        { name: "Kaori", rank: "SSRr", element: "Water", role: "Support" },
        { name: "Kuro (Summer)", rank: "SSRr", element: "Wind", role: "Fighter" },
        { name: "Haruna", rank: "SSRr", element: "Wind", role: "Defender" },
        { name: "Emiko (Summer)", rank: "SSRr", element: "Wind", role: "Support" },
        { name: "Aria", rank: "SSRr", element: "Wind", role: "Support" },
        { name: "Ayame", rank: "SSRr", element: "Wind", role: "Support" },
        { name: "Chihiro", rank: "SSRr", element: "Wind", role: "Support" },
        { name: "Asuka", rank: "SSRr", element: "Light", role: "Fighter" },
        { name: "Lezbianca", rank: "SSRr", element: "Light", role: "Fighter" },
        { name: "Lexi", rank: "SSRr", element: "Light", role: "Assassin" },
        { name: "Hinata (Summer)", rank: "SSRr", element: "Light", role: "Defender" },
        { name: "Dana", rank: "SSRr", element: "Light", role: "Defender" },
        { name: "Yuzuki", rank: "SSRr", element: "Light", role: "Defender" },
        { name: "Sayo", rank: "SSRr", element: "Light", role: "Healer" },
        { name: "Sayuri", rank: "SSRr", element: "Dark", role: "Fighter" },
        { name: "Kirie (Summer)", rank: "SSRr", element: "Dark", role: "Assassin" },
        { name: "Sayaka", rank: "SSRr", element: "Dark", role: "Assassin" },
        { name: "Jass", rank: "SSRr", element: "Dark", role: "Assassin" },
        { name: "Garin", rank: "SSRr", element: "Dark", role: "Support" },
        { name: "Ayaka", rank: "SSR", element: "Fire", role: "Fighter" },
        { name: "Savannah", rank: "SSR", element: "Fire", role: "Assassin" },
        { name: "Kana", rank: "SSR", element: "Fire", role: "Defender" },
        { name: "Maiko", rank: "SSR", element: "Water", role: "Fighter" },
        { name: "Naomi", rank: "SSR", element: "Water", role: "Assassin" },
        { name: "Misaki", rank: "SSR", element: "Water", role: "Healer" },
        { name: "Misato", rank: "SSR", element: "Water", role: "Support" },
        { name: "Tsubasa", rank: "SSR", element: "Wind", role: "Fighter" },
        { name: "Nanami", rank: "SSR", element: "Wind", role: "Defender" },
        { name: "Yui", rank: "SSR", element: "Wind", role: "Healer" },
        { name: "Aoi", rank: "SSR", element: "Light", role: "Assassin" },
        { name: "Kuro", rank: "SSR", element: "Dark", role: "Fighter" },
        { name: "Nanako", rank: "SR", element: "Fire", role: "Fighter" },
        { name: "Azusa", rank: "SR", element: "Fire", role: "Fighter" },
        { name: "Marina", rank: "SR", element: "Water", role: "Defender" },
        { name: "Yukino", rank: "SR", element: "Water", role: "Healer" },
        { name: "Hiyori", rank: "SR", element: "Wind", role: "Fighter" },
        { name: "Kiyomi", rank: "SR", element: "Wind", role: "Healer" },
        { name: "Akane", rank: "SR", element: "Light", role: "Assassin" },
        { name: "Kirie", rank: "SR", element: "Dark", role: "Assassin" },
        { name: "Hinata", rank: "R", element: "Fire", role: "Defender" },
        { name: "Kagura", rank: "R", element: "Fire", role: "Support" },
        { name: "Ayumi", rank: "R", element: "Water", role: "Defender" },
        { name: "Sae", rank: "R", element: "Water", role: "Healer" },
        { name: "Chika", rank: "R", element: "Water", role: "Support" },
        { name: "Kanade", rank: "R", element: "Wind", role: "Fighter" },
        { name: "Lisa", rank: "R", element: "Wind", role: "Assassin" },
        { name: "Emiko", rank: "R", element: "Wind", role: "Support" }
    ];

    function renderMatrix() {
        const container = document.getElementById('matrix-container');
        let localData = [];
        try {
            localData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
        } catch(e) {}

        const ranks = ['SSRr', 'SSR', 'SR', 'R'];
        const elements = ['Fire', 'Water', 'Wind', 'Light', 'Dark'];
        const roles = ['Fighter', 'Assassin', 'Defender', 'Healer', 'Support'];
        const rankLabels = {'SSRr': 'SSR+', 'SSR': 'SSR', 'SR': 'SR', 'R': 'R'};

        ranks.forEach(rank => {
            // Section
            const section = document.createElement('div');
            section.className = 'tier-section';
            
            // Header
            const header = document.createElement('div');
            header.className = `tier-header header-${rank}`;
            header.innerText = rankLabels[rank];
            section.appendChild(header);

            // Grid Matrix
            const grid = document.createElement('div');
            grid.className = 'matrix-grid';

            // --- HEADER ROW (Label Element) ---
            grid.innerHTML += `<div class="header-cell role-label">ROLE</div>`;
            elements.forEach(el => {
                grid.innerHTML += `<div class="header-cell bg-${el}">${el}</div>`;
            });

            // --- DATA ROWS (Roles) ---
            roles.forEach(role => {
                // Kolom 1: Nama Role
                grid.innerHTML += `<div class="cell role-label"><img src="icon/${role}.png"/></div>`;

                // Kolom 2-6: Isi Karakter per Element
                elements.forEach(el => {
                    const cell = document.createElement('div');
                    cell.className = 'cell';

                    const matches = masterRoster.filter(h => h.rank === rank && h.role === role && h.element === el);
                    
                    matches.forEach(hero => {
                        const userData = localData.find(u => u.name === hero.name);
                        const isOwned = !!userData;
                        const stars = isOwned ? '‚òÖ'.repeat(userData.star) : '';
                        const statusIcon = isOwned ? '‚úÖ' : '‚ö™';

                        cell.innerHTML += `
                            <div class="tc-card ${isOwned ? '' : 'not-owned'}">
                                <div class="tc-main">
                                    <img src="img/${hero.name}.png" class="tc-img" onerror="this.src='img/default.png'">
                                    <div class="tc-name">${hero.name}</div>
                                </div>
                                <div class="tc-footer">
                                    <span class="tc-status">${statusIcon}</span>
                                    <span class="tc-stars">${stars}</span>
                                </div>
                            </div>
                        `;
                    });
                    grid.appendChild(cell);
                });
            });

            section.appendChild(grid);
            container.appendChild(section);
        });
    }

    document.addEventListener('DOMContentLoaded', renderMatrix);
</script>

</body>
</html>